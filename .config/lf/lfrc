set ratios 1:2:3
set cleaner ~/.config/lf/cleaner
set previewer ~/.config/lf/preview
set ignorecase true
map <enter> shell

map m
map "'"
map '"'
map d
map c

# https://github.com/salman-abedin/devour
# this program is used a lot here since it is
# a dead simple implementation of swallowing

cmd gallery ${{
	devour iv -t .
}}

cmd open ${{
	case $(file --mime-type  "$f"  -b) in
	# application/vnd.openxmlformats-officedocument.spreadsheetml.sheet) localc $fx ;;
	# image/vnd.djvu|application/pdf|application/octet-stream|application/postscript) zathura $fx >/dev/null 2>&1 ;;
    #     text/*|application/json|inode/x-empty) $EDITOR $fx;;
	# image/x-xcf) gimp "$f" >/dev/null 2>&1 ;;
	# image/svg+xml) display -- "$f" ;;
	# image/*) rotdir "$f" | grep -i "\.\(png\|jpg\|jpeg\|gif\|webp\|tif\|ico\)\(_large\)*$" |
	# 	sxiv -aio 2>/dev/null | while read -r file; do
	# 		[ -z "$file" ] && continue
	# 		lf -remote "send select \"$file\""
	# 		lf -remote "send toggle"
	# 	done &
	# 	;;
	audio/*) mpv --audio-display=no "$f" ;;
	video/*) devour mpv "$f" -quiet >/dev/null 2>&1 ;;
	# application/pdf|application/vnd*|application/epub*) zathura $fx >/dev/null 2>&1 ;;
	# application/pgp-encrypted) $EDITOR $fx ;;
    #     *) for f in $fx; do $OPENER "$f" >/dev/null 2>&1; done;;

	application/pdf|application/vnd*|application/epub*) devour zathura  "$f"  ;;
	image/vnd.djvu|application/pdf|application/octet-stream|application/postscript) devour zathura  "$f"  ;;

	image/*) devour iv "$f"

    esac
}}

cmd unarchive ${{
  mkdir "${f%.*}"
  case "$f" in
      *.zip) unzip "$f" -d "${f%.*}";;
      *.tar.gz) tar -xzvf "$f" -C "${f%.*}";;
      *.tar.bz2) tar -xjvf "$f" -C "${f%.*}";;
      *.tar.xz) tar -xvf "$f" -C "${f%.*}";;
      *.tar) tar -xvf "$f" -C "${f%.*}";;
	  *.rar | *.7z) 7z x "$f" -o"${f%.*}" ;;
      *) echo "Unsupported format" ;;
  esac
}}

map x cut
map D delete
map u unselect
map R reload
map P gallery 
map l open
map au unarchive
map <c-space> glob-select *
map as calcdirsize
map cD cd ~/Downloads
map cw cd ~/pics/wallpapers
map cs cd ~/.steam/steam
map cc cd ~/.config
map cb cd ~/.config/bspwm
map cf cd ~/.config/lf
map ch cd ~
